<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
    "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
  <constant name="struts.serve.static" value="true"/>
  <constant name="struts.serve.static.browserCache" value="true"/>
  <constant name="struts.i18n.encoding" value="UTF-8"/>
  <constant name="struts.disableRequestAttributeValueStackLookup" value="true"/>
  <!--默认i18n和配置文件不重复加载-->
  <constant name="struts.devMode" value="false"/>
  <constant name="struts.configuration.xml.reload" value="false"/>
  <constant name="beangle.i18n.reload" value="false"/>
  <constant name="beangle.i18n.resources" value="beangle,application"/>
  <constant name="beangle.convention.action.suffix" value="Action"/>
  <constant name="beangle.convention.default.parent.package" value="beangle"/>
  <constant name="beangle.convention.preloadftl" value="true"/>
  <!-- max 50M -->
  <constant name="struts.multipart.maxSize" value="52428800"/>
  <constant name="struts.mapper.class" value="beangle"/>
  <constant name="struts.objectFactory.actionFactory" value="beangle" />
  <constant name="struts.objectFactory.resultFactory" value="beangle" />
  <constant name="struts.actionProxyFactory" value="beangle"/>
  <constant name="struts.patternMatcher" value="namedVariable"/>
  
  <package name="beangle" extends="struts-default">
    <interceptors>
      <interceptor name="flash" class="org.beangle.webmvc.struts2.interceptor.FlashInterceptor"/>
      <interceptor-stack name="beangleStack">
        <interceptor-ref name="flash"/>
      </interceptor-stack>
    </interceptors>
    <default-interceptor-ref name="beangleStack"/>
  </package>

  <bean type="org.beangle.commons.text.i18n.spi.TextBundleRegistry" class="org.beangle.commons.text.i18n.impl.DefaultTextBundleRegistry" />
  <bean type="org.beangle.commons.text.i18n.spi.TextFormater" class="org.beangle.commons.text.i18n.impl.DefaultTextFormater"/>

  <bean type="com.opensymphony.xwork2.UnknownHandler" class="org.beangle.webmvc.struts2.ConventionResultHandler"/>
  <bean type="org.apache.struts2.dispatcher.mapper.ActionMapper" name="beangle" class="org.beangle.webmvc.struts2.dispatcher.ConventionActionMapper"/>
  <bean type="com.opensymphony.xwork2.config.PackageProvider" name="beangle" class="org.beangle.webmvc.struts2.config.ConventionPackageProvider"/>
  <bean type="org.beangle.webmvc.route.RouteService" name="default" class="org.beangle.webmvc.route.impl.RouteServiceImpl"/>
  <bean type="org.beangle.webmvc.route.RequestMapper" name="default" class="org.beangle.webmvc.route.impl.HierarchicalUrlMapper"/>
  <bean type="org.beangle.webmvc.context.LocaleResolver" name="default" class="org.beangle.webmvc.context.ParamLocaleResolver"/>

  <bean type="com.opensymphony.xwork2.ActionProxyFactory" name="beangle" class="org.beangle.webmvc.struts2.BeangleActionProxyFactory" />
  <bean type="com.opensymphony.xwork2.factory.ActionFactory" name="beangle" class="org.beangle.webmvc.struts2.factory.BeangleActionFactory" />
  <bean type="com.opensymphony.xwork2.factory.ResultFactory" name="beangle" class="org.beangle.webmvc.struts2.factory.BeangleResultFactory" />
  
  <constant name="struts.freemarker.manager.classname" value="org.beangle.webmvc.struts2.view.BeangleFreemarkerManager"/>
  <bean type="org.apache.struts2.views.TagLibraryModelProvider" name="b" class="org.beangle.webmvc.struts2.view.BeangleStrutsTagLibrary" />
  
</struts>
